<div class="page-wrapper">

  <!-- BOTÃ“N DE NAVEGACIÃ“N -->
  <div class="top-nav">
    <a routerLink="/home" class="btn-back">
      â† Volver al CatÃ¡logo
    </a>
  </div>

  <div class="profile-container">

    <!-- SIDEBAR IZQUIERDO (Avatar y MenÃº) -->
    <aside class="profile-sidebar">
      <div class="user-card">

        <!-- AVATAR INTERACTIVO -->
        <div class="avatar-wrapper">
          <img [src]="profilePhotoUrl" class="avatar-img" alt="Foto de perfil">
          <label class="camera-btn" title="Cambiar foto">
            ğŸ“·
            <input type="file" (change)="onFileSelected($event)" hidden accept="image/*">
          </label>
        </div>

        <h3>{{ user.nombre }}</h3>
        <p class="email-text">{{ user.email }}</p>
      </div>

      <nav class="profile-nav">
        <button [class.active]="activeTab === 'general'" (click)="switchTab('general')">
          ğŸ“ Mis Datos Personales
        </button>
        <button [class.active]="activeTab === 'security'" (click)="switchTab('security')">
          ğŸ”’ Seguridad y ContraseÃ±a
        </button>
      </nav>

      <div class="theme-settings">
        <h3>Apariencia</h3>
        <button class="btn-secondary theme-toggle" (click)="toggleTheme()">
          {{ currentTheme === 'light' ? 'ğŸŒ™ Activar Modo Oscuro' : 'â˜€ï¸ Desactivar Modo Oscuro' }}
        </button>
      </div>
    </aside>

    <!-- CONTENIDO DERECHO (Formularios) -->
    <main class="profile-content">

      <!-- PESTAÃ‘A 1: DATOS GENERALES -->
      <div *ngIf="activeTab === 'general'" class="fade-in">
        <div class="section-header">
          <h2>InformaciÃ³n Personal</h2>
          <p>Actualiza tu informaciÃ³n de contacto para tus pedidos.</p>
        </div>

        <form [formGroup]="profileForm" (ngSubmit)="updateProfile()">
          <div class="form-grid">
            <div class="form-group full-width">
              <label>Nombre Completo</label>
              <input type="text" formControlName="nombre" placeholder="Tu nombre real">
            </div>

            <div class="form-group">
              <label>Correo Institucional</label>
              <input type="email" formControlName="email" class="disabled" title="No se puede cambiar">
              <small>El correo no es modificable.</small>
            </div>

            <div class="form-group">
              <label>TelÃ©fono / Celular</label>
              <input type="tel" formControlName="telefono" placeholder="10 dÃ­gitos">
            </div>
          </div>

          <div class="form-actions">
            <button type="submit" class="btn-primary">ğŸ’¾ Guardar Cambios</button>
          </div>
        </form>
      </div>

      <!-- PESTAÃ‘A 2: SEGURIDAD -->
      <div *ngIf="activeTab === 'security'" class="fade-in">
        <div class="section-header">
          <h2>Cambiar ContraseÃ±a</h2>
          <p>MantÃ©n tu cuenta segura cambiando tu contraseÃ±a periÃ³dicamente.</p>
        </div>

        <form [formGroup]="passwordForm" (ngSubmit)="changePassword()">
          <div class="form-group">
            <label>ContraseÃ±a Actual</label>
            <input type="password" formControlName="currentPassword" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢">
          </div>

          <div class="form-group">
            <label>Nueva ContraseÃ±a</label>
            <input type="password" formControlName="newPassword" placeholder="MÃ­nimo 6 caracteres">
          </div>

          <div class="form-group">
            <label>Confirmar Nueva ContraseÃ±a</label>
            <input type="password" formControlName="confirmPassword" placeholder="Repite la contraseÃ±a">
          </div>

          <div class="form-actions">
            <button type="submit" class="btn-primary">ğŸ” Actualizar ContraseÃ±a</button>
          </div>
        </form>
      </div>

    </main>
  </div>
</div>